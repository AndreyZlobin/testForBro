<h1>Files</h1>
<div class="alert alert-danger" *ngIf="errorMessage">Error: {{errorMessage}}</div>
<div *ngIf="!isLoading; else loading" class="mt-5">
  <table class="table table-striped">
    <thead>
      <tr>
          <th>Batch Id</th>
          <th>Name</th>
          <th>Uploaded</th>
          <th>Emotion</th>
          <th>Beta</th>
          <th></th>
          <th>%</th>
          <th></th>
          <th></th>
          <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of files">
        <td>{{ item.batchid}}</td>
        <td>{{ item.filename}}</td>
        <td>{{item.uploaddate | date: 'dd/MM/yyyy hh:mm:ss'}}</td>
        <td>{{item.angertop && item.angertop.anger}}</td>
        <td>
            {{getEmotionName(item.fourclasstop)}}
        </td>
        <td><img *ngIf="getEmotionImg(item) !== ''" src="../../assets/images/emotions/{{getEmotionImg(item)}}.png" style="width: 30px;" /></td>
        <td>{{getEmotionValue(item.fourclasstop)}}</td>
        <td><button class="btn p-2 btn-secondary" style="cursor: pointer;" [routerLink]="getLink(item)">File details</button></td>
        <td><button class="btn p-2 btn-secondary" style="cursor: pointer;" (click)="proccessFile(item)">Refresh{{proccessing ? '...' : ''}}</button></td>
        <td><button class="btn p-2 btn-secondary" style="cursor: pointer;" (click)="delete(item.batchid, item.filename)">Delete</button></td>
      </tr>
    </tbody>
  </table>
  <ul class="pagination mt-2 mb-2">
    <li class="page-item" *ngFor="let i of pagesArr">
      <a class="page-link" (click)="getPage(i - 1)">{{i}}</a>
    </li>
  </ul>
  <div class="mt-1 mb-2">
    <h6>Selected files total count: {{totalCount}} </h6>
  </div>
  <div *ngIf="!isLoading && !files.length">0 Files</div>
  <button class="btn mt-3 btn-secondary" (click)="refresh()">Refresh</button>
</div>

<ng-template #loading>
  Loading...
</ng-template>