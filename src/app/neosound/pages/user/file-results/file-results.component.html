<nb-card>
  <nb-card-body>
    <div>
      <div class="d-flex flex-row py-3">
        <button class="btn btm-sm btn-primary mr-2" style="cursor: pointer;"
          [disabled]=" isLoading || filterService.hasPrevLink(id)" [routerLink]="filterService.getPrevLink(id)">
          <i class="fa fa-step-backward"></i>
        </button>
        <button class="btn btm-sm btn-primary mr-2" style="cursor: pointer;"
          [disabled]="isLoading || filterService.hasNextLink(id)" [routerLink]="filterService.getNextLink(id)">
          <i class="fa fa-step-forward"></i>
        </button>
        <h2 class="text-truncate mt-2" style="max-width: 60vw;">
          {{ filename }}
        </h2>
        <button class="btn btm-sm btn-secondary ml-auto" style="cursor: pointer;" routerLink="/user/text-files">
          {{ t("Back to List") }}
        </button>
      </div>
    </div>
    <nb-tabset>
      <nb-tab tabTitle="Text">
        <div class="d-flex flex-column">
          <div class="mt-3" *ngIf="!isLoading; else spinner">
            <div [innerHTML]="fullText"></div>
          </div>
        </div>
      </nb-tab>
      <nb-tab tabTitle="Analytics">
        <div class="d-flex flex-column" *ngIf="!isLoading; else spinner">
          <div class="row">
            <div class="col-6 mt-3 mb-3" *ngIf="sankey">
              <div class="card">
                <div class="card-header">Sankey</div>
                <div class="card-body">
                  <div echarts [options]="sankey"></div>
                </div>
              </div>
            </div>
            <div class="col-6 mt-3 mb-3">
              <div class="card" *ngIf="treeRadialData">
                <div class="card-header">Radial Tree</div>
                <div class="card-body">
                  <div echarts [options]="treeRadialData">
                  </div>
                </div>
              </div>
            </div>
            <div class="col-6 mb-3">
              <div class="card" *ngIf="popularWords">
                <div class="card-header">Popular words</div>
                <div class="card-body p-0">
                  <ul class="list-group list-group-flush" style="height: 300px; overflow-y: auto">
                    <li class="list-group-item d-flex" *ngFor="let popularWord of popularWords" style="color: #211b19">
                      <span>{{popularWord.text}}</span>
                      <span class="ml-auto">{{popularWord.value}}</span>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nb-tab>
    </nb-tabset>
  </nb-card-body>
</nb-card>

<ng-template #spinner>
  <div class="load-container load1">
    <div class="loader">{{ t("Loading...") }}</div>
  </div>
</ng-template>