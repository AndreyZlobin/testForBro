<div class="container">
  <div class="col-12 center text-center center-results">
    <div class="alert alert-danger" *ngIf="errorMessage">Error: {{errorMessage}}</div>
    <!-- <h3>Your record analysis:</h3> -->
    <div *ngIf="analysisResult; else loading">
      <div class="row">
        <div class="col-6">
          <div style="width: 60%; height: 300px;">
            <ngx-charts-pie-chart
              *ngIf="chartData"
              [results]="chartData"
              [tooltipDisabled]="false"
              [customColors]="customColors"
              [legend]="true"
              [legendTitle]="''"
              ></ngx-charts-pie-chart>
              <!-- [legend]="true"
              [legendTitle]="''"
              [legendPosition]="'below'" -->
              <!-- [tooltipDisabled]="true"
              [legend]="true" -->
              <!-- [tooltipDisabled]="true"
              [legend]="true"
              [legendTitle]="''"
              legendPosition="below"
              [scheme]="chartScheme" -->
              <!-- <ngx-echarts-pie></ngx-echarts-pie> -->
          </div>
        </div>
        <div class="col-6">
          <h4>Dominant emotion detected</h4>
          <div>
            {{getEmotionValue()}} % {{getEmotionName()}}
          </div>
          <div>
            <input class="mt-1" type="range" disabled value="{{analysisResult[getEmotionName()]}}" />
          </div>
          <div class="mt-5" *ngIf="this.analysisResult.male !== ''">
              <div class="btn-group" role="group">
                <button type="button" class="btn btn-secondary" [ngClass]="{'active': gender === 'male'}">Male</button>
                <button type="button" class="btn btn-secondary" [ngClass]="{'active': gender === 'female'}">Female</button>
              </div>
          </div>
          <div class="mt-5 range-wrap" *ngIf="this.analysisResult.mid !== ''">
              <div class="range">
                <input type="range" min="1" max="4" steps="1" value="3">
              </div>

              <ul class="range-labels">
                <li [ngClass]="{'active selected': getAge('young')}">Teen</li>
                <li [ngClass]="{'active selected': getAge('mid')}">Adult</li>
                <li [ngClass]="{'active selected': getAge('old')}">Senior</li>
              </ul>
          </div>
          <div class="mt-5" *ngIf="this.analysisResult.Anger !== ''">
            <img src="../../assets/images/emotions/{{getEmotionImg()}}.png" style="width: 100px;" />
          </div>
        </div>
      </div>
      <div class="center text-center">
        <div class="center text-center">
          <h6>Are you agree with the result?</h6>
          <a class="btn btn-success mr-3" (click)="showThanks = true">Yes</a>
          <a class="btn btn-danger" (click)="showThanks = true">No</a>
          <div class="alert alert-info" *ngIf="showThanks">Thank you for reply!</div>
        </div>
        <div class="result-links">
          <div class="mt-5">See details <a routerLink="/guest/player-details">here</a></div>
          <a class="mt-5 mb-5" routerLink="/guest/quicktest" (click)="discard()">Check another record</a>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="analysisResult && analysisResult.message" class="center">
    <div>
      <h4>Loading...</h4>
    </div>
    <div class="lds-ring"><div></div><div></div><div></div><div></div></div>
  </div>
</div>

<ng-template #loading>
  <div class="lds-ring"><div></div><div></div><div></div><div></div></div>
</ng-template>