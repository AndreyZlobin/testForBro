<div>
  <button
    class="btn btn-secondary pull-right"
    routerLink="/user/files"
    style="float: right"
  >
    Back
  </button>
  <h1>{{ t("Details") }} <span>{{ fileParams.filename }}</span></h1>
  <!-- <audio id="audio1" [attr.src]="fileUrl" style="visibility: hidden;" ></audio> -->
  <ul class="nav nav-tabs mt-3 mb-3">
    <li class="nav-item">
      <a
        class="nav-link"
        [ngClass]="{ active: currentTab === 'anger', disabled: tabsDisabled }"
        (click)="setTab('anger')"
        >{{ t("Emotion") }}</a
      >
    </li>
    <!-- <li class="nav-item">
      <a class="nav-link" [ngClass]="{'active': currentTab === 'age', 'disabled': tabsDisabled}" (click)="setTab('age')">Age</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" [ngClass]="{'active': currentTab === 'gender', 'disabled': tabsDisabled}" (click)="setTab('gender')">Gender</a>
    </li> -->
    <!-- <li class="nav-item">
      <a class="nav-link" [ngClass]="{'active': currentTab === 'beta', 'disabled': tabsDisabled}" (click)="setTab('beta')">Beta</a>
    </li> -->
    <li class="nav-item">
      <a
        class="nav-link"
        [ngClass]="{ active: currentTab === 'sounds', disabled: tabsDisabled }"
        (click)="setTab('sounds')"
        >{{ t("On-hold") }}</a
      >
    </li>
    <!-- <li class="nav-item">
      <a class="nav-link" [ngClass]="{'active': currentTab === 'results', 'disabled': tabsDisabled}" (click)="setTab('results')" >Summary (beta)</a>
    </li> -->
    <li class="nav-item">
      <a class="nav-link" [ngClass]="{'active': currentTab === 'text', 'disabled': tabsDisabled}" (click)="setTab('text')">{{t('Text')}}</a>
    </li>
  </ul>
  <div class="alert alert-danger" *ngIf="errorMessage">
    {{ t("Error:") }} {{ t(errorMessage) }}
  </div>
  <div [ngClass]="{ 'd-none': currentTab === 'results' }">
    <div id="myWavesurferContainer"></div>
    <div id="timelineContainer"></div>
    <div
      class="d-flex justify-content-start my-4"
      *ngIf="currentTab !== 'results'"
    >
      <button class="btn btn-primary mr-2 mt-1" (click)="play()">
        <i class="fa fa-play"></i>/<i class="fa fa-pause"></i>
      </button>
      <span class="font-weight-bold purple-text mr-3 mt-3"
        ><i class="fa fa-search-plus"></i
      ></span>
      <form class="range-field w-50 mt-3">
        <input
          data-action="zoom"
          type="range"
          min="1"
          max="200"
          value="0"
          style="width: 100%"
          (input)="zoom($event)"
        />
      </form>
      <span class="font-weight-bold purple-text ml-2 mt-3"
        ><i class="fa fa-search-minus"></i
      ></span>
    </div>
    <div class="mt-3 mb-3 float-right" *ngIf="currentTab !== 'results'">
      <label>
        <input type="checkbox" checked (click)="toggleScroll()" />
        {{ t("Fit into window") }}
      </label>
    </div>
  </div>
  <div *ngIf="currentTab === 'anger'" class="mt-3 mb-3">
    <h6 class="text-center">{{ t("Anger level") }}</h6>
    <div class="row">
      <div class="col-1 text-right">0%</div>
      <div class="col-10"><div class="grad1"></div></div>
      <div class="col-1 text-left">100%</div>
    </div>
  </div>
  <!--
  <div *ngIf="currentTab === 'age'" class="mt-3 mb-3">
    <div style="background: red;" class="circle-i"></div>
    - {{ t("Teen") }}
    <div style="background: green;" class="circle-i ml-3"></div>
    - {{ t("Adult") }}
    <div style="background: blue;" class="circle-i ml-3"></div>
    - {{ t("Senior") }}
  </div>
  <div *ngIf="currentTab === 'gender'" class="mt-3 mb-3">
    <div style="background: red;" class="circle-i"></div>
    - {{ t("Female") }}
    <div style="background: blue;" class="circle-i ml-3"></div>
    - {{ t("Male") }}
  </div>
  <div *ngIf="currentTab === 'beta'" class="mt-3 mb-3">
    <div style="background: red;" class="circle-i"></div>
    - {{ t("Anger") }}
    <div style="background: green;" class="circle-i ml-3"></div>
    - {{ t("Happiness") }}
    <div style="background: blue;" class="circle-i ml-3"></div>
    - {{ t("Sadness") }}
  </div>
  -->
  <!--<div *ngIf="currentTab === 'sounds'" class="mt-3 mb-3">-->
  <!--&lt;!&ndash;<div style="background: red;" class="circle-i"></div> - emotions&ndash;&gt;-->
  <!--&lt;!&ndash;<div style="background: green;" class="circle-i ml-3"></div> - music&ndash;&gt;-->
  <!--</div>-->

  <div *ngIf="currentTab === 'text'" class="mt-3 mb-3">
    <h6 class="text-center">{{t('Anger level')}}</h6>
    <div class="row">
      <div class="col-1 text-right">0%</div>
      <div class="col-10"><div class="grad1"></div></div>
      <div class="col-1 text-left">100%</div>
    </div>
    <h6 class="mt-5 text-center">{{t('Text')}}</h6>
    <div class="mt-3">{{sttfulltext}}</div>
  </div>
  <!--  <div *ngIf="currentTab === 'results'" class="mt-3 mb-3">
    <app-results (refresh)="void" [hideAdditionalInfo]="true"></app-results>
  </div>-->
  <!-- <div class="btn-group float-right"><button class="mt-3 btn btn-primary" (click)="zoomIn()">
      <i class="fas fa-search-plus"></i>
    </button>
    <button class="mt-3 btn btn-primary" (click)="zoomOut()">
      <i class="fas fa-search-minus"></i>
    </button>
  </div> -->
  <div *ngIf="emotions && currentTab !== 'results' && currentTab !== 'text'" class="mt-5">
    <div class="scrollable-list">
      <table class="table table-striped" style="max-height: 30vh;overflow-x:auto">
        <tr *ngFor="let item of emotions" (click)="gotoPosition(item[0])">
          <td>
            {{ getDateVal(item[0]) | date: "mm:ss.SSS" }} -
            {{ getDateVal(item[1]) | date: "mm:ss.SSS" }}
          </td>
          <td>{{ t(item[2]) }}</td>
          <td>{{ item[3] | currency: "%":"symbol":"1.2-2" }}</td>
        </tr>
      </table>
    </div>
  </div>
  
  <div *ngIf="emotions && currentTab === 'text'" class="mt-5">
    <div class="scrollable-list">
      <table
        class="table table-striped"
        style="max-height: 30vh;overflow-x:auto"
      >
        <tr *ngFor="let item of emotions" (click)="gotoPosition(item[0])">
          <td>{{ getDateVal(item[0]) | date:'mm:ss.SSS'}} - {{ getDateVal(item[1]) | date:'mm:ss.SSS'}}</td>
          <td>{{item[2]}}</td>
          <td>{{item[3] | currency: '%': 'symbol':'1.2-2'}}</td>
        </tr>
      </table>
    </div>
  </div>
</div>
